<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>


<script src="./js/common.js" type="text/javascript"></script>
<script>

    window.onload = function () {
        var res = createXhr()
        console.log(res)
    }

    function ajaxFunction() {
        1 //创建xhr对象
        var xmlHttp = createXhr()
        2 //创建请求
        var uname = document.getElementById("uname").value
        xmlHttp.open('get', "/02-server?uname=" + uname, true);
        // xmlHttp.open('get', "/01-server1", true);
        3//设置回调函数
        xmlHttp.onreadystatechange = function () {
            // xmlHttp.onreadyStatechange = function () { 不会报错但是就是没结果 因为拼写错误
            //判断readystate为4 且status=200的时候再接收响应数据
            if (xmlHttp.readyState == 4) {
                if (xmlHttp.status == 200) {
                    //将响应数据显示在#show元素中
                    var result = xmlHttp.responseText;
                    document.getElementById("show").innerText = result
                }
            }
        }
        4//发送请求
        xmlHttp.send()
    }


</script>

<br>
用户名：<input type="text" name="uname" id="uname" placeholder="请输入用户名">
<button onclick="ajaxFunction()">发送请求</button>
<div id="show"></div>


</body>
</html>